"use strict";var Clasico=(()=>{var G=Object.defineProperty;var Ge=Object.getOwnPropertyDescriptor;var Ze=Object.getOwnPropertyNames,Ee=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var _e=(e,t,n)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,R=(e,t)=>{for(var n in t||(t={}))we.call(t,n)&&_e(e,n,t[n]);if(Ee)for(var n of Ee(t))Ye.call(t,n)&&_e(e,n,t[n]);return e};var H=(e,t)=>{for(var n in t)G(e,n,{get:t[n],enumerable:!0})},Ke=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ze(t))!we.call(e,s)&&s!==n&&G(e,s,{get:()=>t[s],enumerable:!(r=Ge(t,s))||r.enumerable});return e};var Xe=e=>Ke(G({},"__esModule",{value:!0}),e);var vt={};H(vt,{default:()=>Ct});var Be={};var pe={};H(pe,{BisectArray:()=>S,ReverseCompareArray:()=>ce,ReverseNumberArray:()=>ie,ReverseSortedArray:()=>M,ReverseStringArray:()=>ae,SortedArray:()=>re,SortedCompareArray:()=>le,SortedNumberArray:()=>oe,SortedStringArray:()=>ue});var Le=e=>{let t=e.getDay();return t===0||t===6},Qe=(e,t,n)=>e>=t&&e<=n,He=e=>{try{let t=new Date(e);if(!isNaN(t.getTime()))return t}catch(t){}return null},Z={parse:He,isWeekend:Le,between:Qe};var ee=e=>typeof e=="number"||e instanceof Number||typeof e=="bigint"||e instanceof BigInt,I=e=>typeof e=="string"||e instanceof String,te=e=>typeof e=="boolean"||e instanceof Boolean,ne=e=>typeof e=="function"||e instanceof Function,et=e=>U(e)?!1:typeof e=="object",U=e=>e==null,Te=e=>Array.isArray(e)||e instanceof Array||Object.prototype.toString.call(e)==="[object Array]",ke=e=>e instanceof Set||Object.prototype.toString.call(e)==="[object Set]",tt=e=>U(e)?!1:ne(e[Symbol.iterator]),nt=e=>ee(e)?!0:I(e)?!isNaN(e)&&!isNaN(parseFloat(e)):!1,se=e=>{if(te(e))return!0;let t=ee(e),n=I(e);if(t||n){let r=["true","false",1,0,"1","0",new Boolean(!0),new Boolean(!1),!0,!1];if(r.includes(e))return!0;if(n){e=e.trim();let s=Math.max(...r.map(o=>o.toString().length));if(e.length<=s&&r.includes(e.toLowerCase()))return!0}}return!1},xe=e=>(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof BigInt||e instanceof Symbol)&&e.valueOf&&ne(e.valueOf)?e.valueOf():e,Ne=e=>{let t=xe(e);if(e===!0||t===!0)return!0;if(se(e)){let n=[!0,"true","1",1,new Boolean(!0)];if(n.includes(e))return!0;if(!U(t)){if(n.includes(t))return!0;I(t)&&(e=t)}if(I(e)){let r=e.trim(),s=Math.max(...n.map(o=>o.toString().length));if(r.length<=s&&n.includes(r.toLowerCase()))return!0}}return!1},st=e=>e===!1||xe(e)===!1?!0:se(e)?!Ne(e):!1,rt=e=>U(e)||I(e)&&typeof e=="string"&&(e=e.trim(),!e)||te(e)||Te(e)||ke(e)?!1:!!Z.parse(e),it=(e,t=!1)=>U(e)?!1:!!(e instanceof Error||t&&e&&e.stack&&e.message),h={isNil:U,isNumber:ee,isString:I,isBoolean:te,isFunction:ne,isObject:et,isNumeric:nt,isValidBoolean:se,isTrue:Ne,isFalse:st,isArray:Te,isSet:ke,isIterable:tt,isDate:rt,isError:it};var S=class extends Array{constructor(n){let r=n.items;super(...r);this.opts=n;this.isValidCmp()?this.sort(this.opts.cmp):this.sort((s,o)=>this.opts.key(s)-this.opts.key(o)),this.opts.asReversed&&this.reverse()}pop(){return this.isReversed()?super.pop():super.shift()}push(...n){for(let r of n){let s=this.binarySearch(r);this.splice(s,0,r)}return this.length}binarySearch(n){let r=0,s=this.length-1;for(;r<=s;){let o=Math.floor((r+s)/2);if(this.shouldSwap(this[o],n))r=o+1;else if(this.shouldSwap(n,this[o]))s=o-1;else return o}return r}shouldSwap(n,r){if(this.opts.cmp&&this.isValidCmp())return this.isReversed()?this.opts.cmp(r,n)<=0:this.opts.cmp(n,r)<=0;let s=this.opts.key(n),o=this.opts.key(r);return this.isReversed()?o-s<=0:s-o<=0}isValidCmp(){return this.opts.cmp&&h.isFunction(this.opts.cmp)}isReversed(){return this.opts.asReversed}},M=class extends S{constructor(t,...n){super({key:t,asReversed:!0,items:n})}},re=class extends S{constructor(t,...n){super({key:t,asReversed:!1,items:n})}},ie=class extends S{constructor(...t){super({key:n=>n,asReversed:!0,items:t})}},oe=class extends S{constructor(...t){super({key:n=>n,asReversed:!1,items:t})}},ae=class extends S{constructor(...t){super({key:()=>0,cmp:(n,r)=>n.localeCompare(r),asReversed:!0,items:t})}},ue=class extends S{constructor(...t){super({key:()=>0,cmp:(n,r)=>n.localeCompare(r),asReversed:!0,items:t})}},ce=class extends S{constructor(t,...n){super({key:()=>0,cmp:t,asReversed:!0,items:n})}},le=class extends S{constructor(t,...n){super({key:()=>0,cmp:t,asReversed:!0,items:n})}};var Se=R({},pe);function Re(e,t,n){function r(b,p,$){let d=new Map;for(let _=p;_<=$;_++){let g=b[_];d.has(g)?(d.get(g).count++,d.get(g).index=_):d.set(g,{count:1,index:_})}return d.forEach((_,g,y)=>{_.count!==1?y.delete(g):y.set(g,_.index)}),d}function s(b,p,$,d,_,g){let y=r(b,p,$),A=r(d,_,g);return y.forEach((Q,j,J)=>{A.has(j)?J.set(j,{indexA:Q,indexB:A.get(j)}):J.delete(j)}),y}function o(b){let p=[];b.forEach((d,_,g)=>{let y=0;for(;p[y]&&p[y][p[y].length-1].indexB<d.indexB;)y++;p[y]||(p[y]=[]),0<y&&(d.prev=p[y-1][p[y-1].length-1]),p[y].push(d)});let $=[];if(0<p.length){let d=p.length-1;for($=[p[d][p[d].length-1]];$[$.length-1].prev;)$.push($[$.length-1].prev)}return $.reverse()}let a=[],u=0,c=0,v=[],l=[],C=[],B=[];function N(b,p){p<0?(v.push(e[b]),l.push(a.length),u++):b<0&&(C.push(t[p]),B.push(a.length),c++),a.push({line:0<=b?e[b]:t[p],aIndex:b,bIndex:p})}function k(b,p,$,d){for(;b<=p&&$<=d&&e[b]===t[$];)N(b++,$++);let _=p;for(;b<=p&&$<=d&&e[p]===t[d];)p--,d--;let g=s(e,b,p,t,$,d);if(g.size===0){for(;b<=p;)N(b++,-1);for(;$<=d;)N(-1,$++)}else W(b,p,$,d,g);for(;p<_;)N(++p,++d)}function W(b,p,$,d,_){let g=o(_||s(e,b,p,t,$,d));if(g.length===0)k(b,p,$,d);else{(b<g[0].indexA||$<g[0].indexB)&&k(b,g[0].indexA-1,$,g[0].indexB-1);let y;for(y=0;y<g.length-1;y++)k(g[y].indexA,g[y+1].indexA-1,g[y].indexB,g[y+1].indexB-1);(g[y].indexA<=p||g[y].indexB<=d)&&k(g[y].indexA,p,g[y].indexB,d)}}return W(0,e.length-1,0,t.length-1),n?{lines:a,lineCountDeleted:u,lineCountInserted:c,lineCountMoved:0,aMove:v,aMoveIndex:l,bMove:C,bMoveIndex:B}:{lines:a,lineCountDeleted:u,lineCountInserted:c,lineCountMoved:0}}var Rt=Re([],[],!0),ot=(e,t)=>{let n=Re(e.split(`
`),t.split(`
`),!0);return{changes:n.lines.map((s,o)=>{let a="unknown";return s.aIndex>=0&&s.bIndex<0?a="deleted":s.aIndex<0&&s.bIndex>=0?a="inserted":s.aIndex>=0&&s.bIndex>=0&&(a="changed"),{changeType:a,lineNumber:o+1,lineContent:s.line,aIndex:s.aIndex,bIndex:s.bIndex}}),deletedCount:n.lineCountDeleted,insertedCount:n.lineCountInserted,movedCount:n.lineCountInserted,linedMovedFromA:n.aMove||[],linesMovedFromB:n.bMove||[],_diff:n}},Oe={compare:ot};var fe=(e,t,n=2)=>{let r=(C,B)=>{C=" ".repeat(B-1)+C.toLowerCase()+" ".repeat(B-1);let N=new Array(C.length-B+1);for(let k=0;k<N.length;k++)N[k]=C.slice(k,k+B);return N};if(!(e!=null&&e.length)||!(t!=null&&t.length))return 0;let s=e.length<t.length?e:t,o=e.length<t.length?t:e,a=r(s,n),u=r(o,n),c=new Set(a),v=u.length,l=0;for(let C of u)c.delete(C)&&l++;return l/v},at=(e,t,n,r=5,s=.35,o=2)=>{let a=n(e);r<=0&&(r=5);let u=new Map,c=new M(v=>{let l=n(v),C=u.get(l),B=C||fe(a,l,o);return C===void 0&&u.set(l,B),B});return t.forEach(v=>{if(fe(a,n(v),o)>=s&&(c.push(v),c.length>r)){let C=c.pop();C&&u.delete(n(C))}}),[...c]},Y={similarity:fe,topSimilar:at};var z="$B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B",O={0:"PREC0",1:"PREC1",2:"COUNT_PRECS",PREC0:0,PREC1:1,COUNT_PRECS:2};Object.freeze(O);Object.seal(O);var V={"+":{func:(e,t)=>[e,t].every(h.isNumber)?e+t:`${e}+${t}`,prec:O.PREC0},"-":{func:(e,t)=>[e,t].every(h.isNumber)?e-t:`${e}-${t}`,prec:O.PREC0},"*":{func:(e,t)=>[e,t].every(h.isNumber)?e*t:`${e}*${t}`,prec:O.PREC1},"/":{func:(e,t)=>[e,t].every(h.isNumber)?e/t:`${e}/${t}`,prec:O.PREC1},"%":{func:(e,t)=>[e,t].every(h.isNumber)?e%t:`${e}%${t}`,prec:O.PREC1}},K={"-":e=>-e},X=class{constructor(t,n=[],r="(),",s=!1){this.src=t;this.hist=n;this.syntax=r;this.alreadyCrashed=s}nextToken(){let t=this.next();return t!==null&&this.unnext(t),t}lastToken(){return this.hist[this.hist.length-1]}unnext(t){this.src=t+this.src,this.hist.pop()}next(){if(this.src=this.src.trimStart(),this.src.length==0)return null;let t=u=>u in V||u in K||this.syntax.includes(u),n=this.src.startsWith('"'),r=this.src.startsWith("'"),s=n||r,o=this.src.indexOf(n?'"':"'",1);if(s&&o>0){let u=this.src.slice(0,o+1);return this.src=this.src.slice(o+1),this.hist.push(u),u}if(t(this.src[0])){let u=this.src[0];return this.src=this.src.slice(1),this.hist.push(u),u}for(let u=0;u<this.src.length;++u)if(t(this.src[u])||this.src[u]==" "){let c=this.src.slice(0,u);return this.src=this.src.slice(u),this.hist.push(c),c}let a=this.src;return this.hist.push(a),this.src="",a}hasNext(){let t=this.next(),n=t!==null;return n&&this.unnext(t),n}spaceAfterToken(){let t=this.next(),n=t!==null;if(n&&this.src){let r=this.src.length-this.src.trimStart().length;if(r>0)return this.unnext(t)," ".repeat(r)}return n&&this.unnext(t),""}},Ae=e=>{let t=e.next();if(t!==null)if(t in K){let n=F(e);return{kind:"unary_op",payload:{op:t,operand:n}}}else if(t==="("){let n=F(e);if(t=e.next(),t===z&&(t=e.next()),t!==")")throw new Error("Expected ')' but got '"+t+"'");return n}else if(t===")"){if(!e.alreadyCrashed)return e.alreadyCrashed=!0,e.unnext(","+z+")"),Ae(e);throw new Error("No primary expression starts with ')'")}else{let n=e.next();if(n==="("){let r=[];if(n=e.next(),n===")")return{kind:"funcall",payload:{name:t,args:r}};if(n===null)throw Error("Unexpected end of input");for(e.unnext(n),r.push(F(e)),n=e.next(),n===z&&(n=e.next());n==",";)r.push(F(e)),n=e.next(),n===z&&(n=e.next());return n===z&&(n=e.next()),n!==")"?{kind:"symbol",payload:{value:t}}:{kind:"funcall",payload:{name:t,args:r}}}else return n!==null&&e.unnext(n),{kind:"symbol",payload:{value:t}}}else throw new Error("Expected primary expression but reached the end of the input")},F=(e,t=O.PREC0)=>{if(t>=O.COUNT_PRECS)return Ae(e);let n=F(e,t+1),r=e.next();if(r!==null)if(r in V&&V[r].prec==t){let s=F(e,t);return{kind:"binary_op",payload:{op:r,lhs:n,rhs:s}}}else e.unnext(r);return n},P=(e,t={},n=[])=>{console.assert(h.isObject(e));let r=(s,o)=>Y.topSimilar(o,[...Object.keys(t[s]||{})],a=>a,5).map(a=>a.replace(/[\u00A0-\u9999<>&]/g,u=>"&#"+u.charCodeAt(0)+";"));switch(e.kind){case"symbol":{let o=e.payload.value,a=Number(o);if(isNaN(a)){if(t.vars&&o&&o in t.vars)return t.vars[o];if(o!=null&&o.startsWith("$")){let u=JSON.stringify(r("vars",o)),c=` maybe your meant one of these variables ${u}`;n.push("Unknown variable '"+o+"'"+(u!=="[]"?c:"")),o in(t.funcs||{})&&n.push("'"+o+"' is defined as a function.")}return o}else return a}case"unary_op":{let s=e.payload,o=s==null?void 0:s.op,a=s==null?void 0:s.operand;if(o&&o in K){if(a===void 0)throw new Error("operand needs to be an object not undefined");return K[o](P(a,t))}throw new Error("Unknown unary operator '"+s.op+"'")}case"binary_op":{let s=e.payload,o=s==null?void 0:s.op,a=s==null?void 0:s.lhs,u=s==null?void 0:s.rhs;if(o&&o in V){if(a===void 0)throw new Error(`lhs operand needs to be an object not undefined: lhs=${a} :: rhs=${u}`);if(u===void 0)throw new Error(`rhs operand needs to be an object not undefined: lhs=${a} :: rhs=${u}`);return V[o].func(P(a,t),P(u,t))}throw new Error("Unknown binary operator '"+o+"'")}case"funcall":{let s=e.payload,o=s.name,a=s.args;if(t.funcs&&o!==void 0&&a!==void 0&&o in t.funcs){let c;return(c=t.funcs)[o].apply(c,a.map(v=>P(v,t)))}if(o!=null&&o.startsWith("$")){let c=JSON.stringify(r("funcs",o)),v=`maybe your meant one of these functions ${c}`;n.push("Unknown function '"+o+"' "+(c!=="[]"?v:"")),o in(t.vars||{})&&n.push("'"+o+"' is defined as a variable.")}let u=a==null?void 0:a.map(c=>{var v;return(v=c==null?void 0:c.payload)==null?void 0:v.value}).map(c=>h.isObject(c)?JSON.stringify(c):c).join(", ");return`${o}(${u||""})`}default:throw new Error("Unexpected AST node '"+e.kind+"'")}};var ut=e=>(h.isString(e)&&(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))&&(e=e.substring(1,e.length-1)),e),ct=e=>{let t=e==null?void 0:e.funcs;if(t&&h.isObject(t)){let n=R({},t),r={};Object.keys(n).forEach(s=>{r[s]=(...o)=>(o=o.map(ut),n[s](...o))}),e.funcs=r}return e},lt=(e,t={})=>{let n=[],r=[];return{result:e.split(`
`).map((o,a)=>{try{let u=Fe(o,t);return n.push(...u.warnings.map(c=>({lineNumber:a+1,message:c}))),u.result}catch(u){if(u.message.toLowerCase().startsWith("no primary expression starts with ')'")||u.message.startsWith("Expected ')' but got '")){let v=o.replace(/(\W)\(([^)]+)\)/g,"$1 <parentheses> $2 </parentheses>");try{let l=Fe(v,t);return n.push(...l.warnings.map(C=>({lineNumber:a+1,message:C}))),l.result.replace(/<parentheses> /gi,"(").replace(/ <\/parentheses>/gi,")")}catch(l){}}let c="";u&&(c=u.message,!c&&u.toString&&(c=u.toString())),r.push({lineNumber:a+1,message:c,error:u})}return o}).join(`
`),warnings:n,errors:r}},Fe=(e,t={})=>{var a;let n=[],r=ct(R({},t)),s=new X(e),o=[];for(;s.hasNext();){let u=s.spaceAfterToken(),c="",v=F(s),l=v.payload.value,C=[];if(l&&h.isString(l)&&l.startsWith("$")){c=u;let $=l.endsWith("."),d=l.endsWith("!"),_=l.endsWith("("),g=l.endsWith(")"),y=l.endsWith(">"),A=l.endsWith("<");for(;l&&($||d||_||g||y||A);)l=l.substring(0,l.length-1),$?C.push("."):d?C.push("!"):_?C.push("("):g?C.push(")"):y?C.push(">"):A&&C.push("<"),$=l.endsWith("."),d=l.endsWith("!"),_=l.endsWith("("),g=l.endsWith(")"),y=l.endsWith(">"),A=l.endsWith("<");C.length!==0&&(v.payload.value=l)}let B=v.kind==="funcall",N=v.kind==="symbol",k=P(v,r,n),W=C.join("");o.push(k+W+c);let b=(a=s.lastToken())==null?void 0:a.startsWith("$"),p=o.lastIndexOf(",")-1;s.lastToken()===","&&o[p]===" "&&o.splice(p,1),B&&!["!",".",","].includes(s.nextToken())&&o.push(" "),B||N&&b||o.push(" ")}return{result:o.join("").trim(),warnings:n}},L=class{constructor(t={includeBuiltIns:!0},n={},r=[],s=[]){this.options=t;this.ctx=n;this.errors=r;this.warnings=s;this.options.includeBuiltIns&&(this.ctx.funcs=R(R({},this.builtinFunctions()),this.ctx.funcs||{}))}builtinFunctions(){let t=i=>Math.abs(i),n=(...i)=>i.map(s).every(f=>f===!0),r=(...i)=>i.map(s).some(f=>f===!0),s=i=>h.isValidBoolean(i)?h.isTrue(i):!!i&&ve(i),o=i=>parseFloat(i),a=i=>{if(b(i))return`${i}`;if(h.isObject(i))try{i=JSON.stringify(i)}catch(f){let m=[];i=JSON.stringify(i,(x,T)=>{if(typeof T=="object"&&T!==null){if(m.includes(T))return"[Circular]";m.push(T)}return T}).replace(/"\[Circular\]"/g,()=>JSON.stringify("[Circular]"))}return h.isString(i)||(i=i.toString?i.toString():`${i}`),i},u=(i,...f)=>(!h.isString(i)||f.length===0||f.map(a).forEach((m,E)=>{let x=`{${E}}`;for(;i.includes(x);)i=i.replace(x,m)}),i),c=(i,f,m)=>s(i)?f:m,v=i=>parseInt(i),l=(i,...f)=>{let m=Ce(i);return f.map(a).some(E=>m===E)},C=i=>l(i,"string"),B=i=>l(i,"number","bigint"),N=i=>l(i,"undefined"),k=i=>l(i,"object"),W=i=>l(i,"boolean"),b=i=>i==null,p=(i,f,m)=>(i=a(i),f=a(f),i.endsWith(f,m)),$=(i,f,m)=>a(i).startsWith(f,m),d=i=>a(i).toLowerCase(),_=i=>a(i).toUpperCase(),g=i=>a(i).length,y=(...i)=>Math.max(...i.map(a).map(o).filter(f=>!isNaN(f))),A=(...i)=>Math.min(...i.map(a).map(o).filter(f=>!isNaN(f))),Q=(i,f)=>Math.pow(i,f),j=i=>Math.round(i),J=(i,...f)=>{try{let E=Math[i],x=h.isFunction(E)?E(...f):E;if(x)return x}catch(E){this.errors.push({error:E,message:E.message||`${E}`,lineNumber:NaN})}let m=f.join(", ");return this.warnings.push({lineNumber:NaN,message:`Couldn't resolve Math.${i}${m?"("+m+")":""}`}),`$math('${i}'${m?", "+m:""})`},ze=(...i)=>i.map(a).join(""),Ve=(i,f,m)=>{let E=a(i);return(f===void 0||!h.isNumber(f)||f<0)&&(f=0),(m===void 0||!h.isNumber(f)||m>E.length)&&(m=E.length),E.substring(f,m)},Ce=i=>typeof i,qe=(i,...f)=>{let m=i;return f.filter(h.isString).forEach(E=>{let x=E.split(".");m[x[0]]||(x=[E]),x.filter(T=>!!T).forEach(T=>{m&&T&&m[T]&&(m=m[T])})}),m},Je=(i,...f)=>{let m=i,E=!0;return f.filter(h.isString).forEach(x=>{let T=x.split(".");m[T[0]]||(T=[x]),T.filter(D=>!!D).forEach(D=>{m&&D&&m[D]?m=m[D]:E=!1})}),E},ve=i=>!a(i).startsWith("$");return{$if:c,$abs:t,$all:n,$any:r,$bool:s,$float:o,$str:a,$format:u,$int:v,$isnil:b,$isinstance:l,$tisstring:C,$tisnumber:B,$tisboolean:W,$tisundefined:N,$tisobject:k,$len:g,$max:y,$min:A,$pow:Q,$round:j,$substring:Ve,$type:Ce,$math:J,$getattr:qe,$concat:ze,$hasattr:Je,$isset:ve,$includes:(i,f)=>{if(i){if(i.includes&&h.isFunction(i.includes))return i.includes(f);if(i.has&&h.isFunction(i.has))return i.has(f)}return!1},$endsWith:p,$startsWith:$,$lower:d,$upper:_,$now:()=>new Date}}fixName(t){return t.startsWith("$")?t:"$"+t}fnExists(t){return t=this.fixName(t),t in(this.ctx.funcs||{})}varExists(t){return t=this.fixName(t),t in(this.ctx.vars||{})}addVar(t,n){t=this.fixName(t),this.ctx.vars=this.ctx.vars||{},this.ctx.vars[t]=n}addFunction(t,n){t=this.fixName(t),this.ctx.funcs=this.ctx.funcs||{},this.ctx.funcs[t]=n}clearWarnings(){this.warnings=[]}clearErrors(){this.errors=[]}parse(t){let n=lt(t,this.ctx||{});return this.errors.push(...n.errors),this.warnings.push(...n.warnings),n}},Dt=new L({includeBuiltIns:!1}).builtinFunctions,We={SentenceParser:L};var pt=(e,t=!0)=>{if(t&&!h.isString(e)){if(h.isSet(e)&&(e=Array.from(e)),h.isObject(e))try{e=JSON.stringify(e)}catch(r){let s=[];e=JSON.stringify(e,(a,u)=>{if(typeof u=="object"&&u!==null){if(s.includes(u))return"[Circular]";s.push(u)}return u}).replace(/"\[Circular\]"/g,()=>JSON.stringify("[Circular]"))}!h.isString(e)&&e.toString&&(e=e.toString())}if(!h.isString(e))return null;let n=0;for(let r=0;r<e.length;++r){let s=e.charCodeAt(r);n=(n<<5)-n+s,n&=n}return n},ft=e=>h.isString(e)?e.charAt(0).toUpperCase()+e.slice(1):"",q={hashCode:pt,capitalize:ft};var he=[[/(quiz)$/i,"$1zes"],[/^(oxen)$/i,"$1"],[/^(ox)$/i,"$1en"],[/(m|l)ice$/i,"$1ice"],[/(m|l)ouse$/i,"$1ice"],[/(passer)s?by$/i,"$1sby"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/([lr])f$/i,"$1ves"],[/([^f])fe$/i,"$1ves"],[/sis$/i,"ses"],[/([ti])a$/i,"$1a"],[/([ti])um$/i,"$1a"],[/(buffal|potat|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)i$/i,"$1i"],[/(octop|vir)us$/i,"$1i"],[/^(ax|test)is$/i,"$1es"],[/s$/i,"s"],[/$/i,"s"]],de=[[/(database)s$/i,"$1"],[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/(passer)sby$/i,"$1by"],[/^(ox)en/i,"$1"],[/(alias|status)(es)?$/i,"$1"],[/(octop|vir)(us|i)$/i,"$1us"],[/^(a)x[ie]s$/i,"$1xis"],[/(cris|test)(is|es)$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)(es)?$/i,"$1"],[/(m|l)ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(t)he(sis|ses)$/i,"$1hesis"],[/(s)ynop(sis|ses)$/i,"$1ynopsis"],[/(p)rogno(sis|ses)$/i,"$1rognosis"],[/(p)arenthe(sis|ses)$/i,"$1arenthesis"],[/(d)iagno(sis|ses)$/i,"$1iagnosis"],[/(b)a(sis|ses)$/i,"$1asis"],[/(a)naly(sis|ses)$/i,"$1nalysis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/(ss)$/i,"$1"],[/s$/i,""]],me=new Set(["equipment","fish","information","jeans","money","rice","series","sheep","species"]),w=(e,t)=>{let n=a=>Array.from(a).map(u=>"["+u+u.toUpperCase()+"]").join(""),r=(a,u,c)=>{a.splice(u,0,[new RegExp(c[0],"i"),c[1]])},s=(a,u)=>{r(he,a,u)},o=(a,u)=>{r(de,a,u)};e[0].toUpperCase()==t[0].toUpperCase()?(s(0,[`(${e[0]})${e.slice(1)}$`,"$1"+t.slice(1)]),s(0,[`(${t[0]})${t.slice(1)}$`,"$1"+t.slice(1)]),o(0,[`(${t[0]})${t.slice(1)}$`,"$1"+e.slice(1)])):(s(0,[`${e[0].toUpperCase()}${n(e.slice(1))}$`,t[0].toUpperCase()+t.slice(1)]),s(0,[`${e[0].toLowerCase()}${n(e.slice(1))}$`,t[0].toLowerCase()+t.slice(1)]),s(0,[`${t[0].toUpperCase()}${n(t.slice(1))}$`,t[0].toUpperCase()+t.slice(1)]),s(0,[`${t[0].toLowerCase()}${n(t.slice(1))}$`,t[0].toLowerCase()+t.slice(1)]),o(0,[`${t[0].toUpperCase()}${n(t.slice(1))}$`,e[0].toUpperCase()+e.slice(1)]),o(0,[`${t[0].toLowerCase()}${n(t.slice(1))}$`,e[0].toLowerCase()+e.slice(1)]))},ht=(e,t=!0)=>{let n=je(e).replace(/-/," ").replace(/(?:^\w|[A-Z]|\b\w)/g,(s,o)=>o===0?s.toLowerCase():s.toUpperCase()).replace(/\s+/g,"");return t?n.charAt(0).toUpperCase()+n.slice(1):n},je=e=>e.replace(/_/g,"-"),Ie=e=>(e=e.replace(/_id$/i,""),e=e.replace(/_/g," "),e=e.replace(/([a-z\d]*)/g,t=>t.toLowerCase()),e=e.replace(/^\w/,t=>t.toUpperCase()),e),Ue=e=>{let t=Math.abs(parseInt(e));if([11,12,13].includes(t%100))return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},dt=e=>e+Ue(e),mt=(e,t="-")=>{let r=De(e).replace(/[^\d\w-]+/gmi,t);if(t!==""){for(;r.startsWith(t);)r=r.slice(t.length);for(;r.endsWith(t);)r=r.slice(0,r.length-t.length)}return r.toLowerCase()},Pe=e=>{let t=/[A-Z]/.test(e.charAt(0)),n=/[A-Za-z]$/.test(e);if(!e||me.has(e.toLowerCase())||!n)return e;for(let r of he){let s=r[0],o=r[1];if(s.test(e)){let a=e.replace(s,o);return t?q.capitalize(a):a}}return e},gt=e=>{let t=/[A-Z]/.test(e.charAt(0));for(let n of me)if(new RegExp(`\\b${n}\\b`,"i").test(e))return e;for(let n of de){let r=n[0],s=n[1];if(r.test(e)){let o=e.replace(r,s);return t?q.capitalize(o):o}}return e},yt=e=>Pe(ge(e)),$t=e=>Ie(ge(e)).split(/\s+/).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),De=e=>e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,"").trim(),ge=e=>{let t=e.replace(/([a-z\d])([A-Z])/g,"$1_$2");return t=t.replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2"),t=t.replace(/-/g,"_"),t.toLowerCase()};w("person","people");w("man","men");w("human","humans");w("child","children");w("sex","sexes");w("move","moves");w("cow","kine");w("zombie","zombies");w("slave","slaves");w("this","this");w("flour","flour");w("milk","milk");w("water","water");w("reserve","reserves");w("gas","gasses");w("bias","biases");w("atlas","atlases");w("goose","geese");w("pasta","pastas");w("slice","slices");w("cactus","cacti");var Me={camelize:ht,dasherize:je,humanize:Ie,ordinal:Ue,ordinalize:dt,parameterize:mt,pluralize:Pe,singularize:gt,tableize:yt,titleize:$t,transliterate:De,underscore:ge,UNCOUNTABLES:me,PLURALS:he,SINGULARS:de};var be={};H(be,{Option:()=>ye,Result:()=>$e});var bt=e=>h.isError(e,!1),ye=class{},$e=class{constructor(t,n,r,s=!1){this.fn=t;this.result=n;this.error=r;this.ran=s}match(t){let n=this.isErr();return this.isOk()&&this.result!==void 0?t.onOk(this.result):n&&this.error!==void 0?t.onError(this.error):t.debug&&t.debug(this.result,this.error),[this.result,this.error]}run(...t){this.ran=!0;try{let n=this.fn(...t);bt(n)?this.error=n:this.result=n}catch(n){this.error=n}return this}isErr(){if(!this.ran)return null;let t=this.error===void 0,n=this.result===void 0;return n&&t?null:!!(n&&!t)}isOk(){if(!this.ran)return null;let t=this.error===void 0;return this.result===void 0&&t?null:!!t}};var Ct=R({check:h,parser:We,inflection:Me,utils:q,date:Z,fuzzy:Y,array:Se,diff:Oe,std:be},Be);return Xe(vt);})();
//# sourceMappingURL=clasico-utils.js.map
