"use strict";var ClasicoUtils=(()=>{var R=Object.defineProperty;var vt=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames,J=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var D=(t,e,n)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||(e={}))H.call(e,n)&&D(t,n,e[n]);if(J)for(var n of J(e))wt.call(e,n)&&D(t,n,e[n]);return t};var kt=(t,e)=>{for(var n in e)R(t,n,{get:e[n],enumerable:!0})},Ot=(t,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Nt(e))!H.call(t,i)&&i!==n&&R(t,i,{get:()=>e[i],enumerable:!(s=vt(e,i))||s.enumerable});return t};var At=t=>Ot(R({},"__esModule",{value:!0}),t);var Dt={};kt(Dt,{default:()=>Jt});var W=new Boolean(!0),Q=new Boolean(!1),Rt=[!0,W,!1,Q],P=t=>typeof t=="number"||t instanceof Number||typeof t=="bigint"||t instanceof BigInt,U=t=>typeof t=="string"||t instanceof String,X=t=>typeof t=="boolean"||t instanceof Boolean||Rt.includes(t),tt=t=>typeof t=="function"||t instanceof Function,Ut=t=>et(t)?!1:typeof t=="object",et=t=>t==null,xt=t=>Array.isArray(t)||t instanceof Array||Object.prototype.toString.call(t)==="[object Array]",Ft=t=>t instanceof Set||Object.prototype.toString.call(t)==="[object Set]",jt=t=>et(t)?!1:tt(t[Symbol.iterator]),Lt=t=>P(t)?!0:U(t)?!isNaN(t)&&!isNaN(parseFloat(t)):!1,I=t=>{if(X(t))return!0;let e=P(t),n=U(t);if(e||n){let s=["true","false",1,0,"1","0",W,Q,!0,!1];if(s.includes(t))return!0;if(n){t=t.trim();let i=Math.max(...s.map(o=>o.toString().length));if(t.length<=i&&s.includes(t.toLowerCase()))return!0}}return!1},nt=t=>{if(t&&t.toString&&t.toString()==="true")return!0;if(I(t)){let e=[!0,"true","1",1,W];if(e.includes(t))return!0;if(U(t)){t=t.trim();let n=Math.max(...e.map(s=>s.toString().length));if(t.length<=n&&e.includes(t.toLowerCase()))return!0}}return!1},Tt=t=>t&&t.toString&&t.toString()==="false"?!0:I(t)?!nt(t):!1,u={isNumber:P,isString:U,isBoolean:X,isFunction:tt,isObject:Ut,isNumeric:Lt,isValidBoolean:I,isTrue:nt,isFalse:Tt,isArray:xt,isSet:Ft,isIterable:jt};var N="$B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B_B",d={0:"PREC0",1:"PREC1",2:"COUNT_PRECS",PREC0:0,PREC1:1,COUNT_PRECS:2};Object.freeze(d);Object.seal(d);var w={"+":{func:(t,e)=>[t,e].every(u.isNumber)?t+e:`${t}+${e}`,prec:d.PREC0},"-":{func:(t,e)=>[t,e].every(u.isNumber)?t-e:`${t}-${e}`,prec:d.PREC0},"*":{func:(t,e)=>[t,e].every(u.isNumber)?t*e:`${t}*${e}`,prec:d.PREC1},"/":{func:(t,e)=>[t,e].every(u.isNumber)?t/e:`${t}/${e}`,prec:d.PREC1},"%":{func:(t,e)=>[t,e].every(u.isNumber)?t%e:`${t}%${e}`,prec:d.PREC1}},x={"-":t=>-t},F=class{constructor(e,n=[],s="(),",i=!1){this.src=e;this.hist=n;this.syntax=s;this.alreadyCrashed=i}nextToken(){let e=this.next();return e!==null&&this.unnext(e),e}lastToken(){return this.hist[this.hist.length-1]}unnext(e){this.src=e+this.src,this.hist.pop()}next(){if(this.src=this.src.trimStart(),this.src.length==0)return null;let e=c=>c in w||c in x||this.syntax.includes(c),n=this.src.startsWith('"'),s=this.src.startsWith("'"),i=n||s,o=this.src.indexOf(n?'"':"'",1);if(i&&o>0){let c=this.src.slice(0,o+1);return this.src=this.src.slice(o+1),this.hist.push(c),c}if(e(this.src[0])){let c=this.src[0];return this.src=this.src.slice(1),this.hist.push(c),c}for(let c=0;c<this.src.length;++c)if(e(this.src[c])||this.src[c]==" "){let h=this.src.slice(0,c);return this.src=this.src.slice(c),this.hist.push(h),h}let l=this.src;return this.hist.push(l),this.src="",l}hasNext(){let e=this.next(),n=e!==null;return n&&this.unnext(e),n}spaceAfterToken(){let e=this.next(),n=e!==null;if(n&&this.src){let s=this.src.length-this.src.trimStart().length;if(s>0)return this.unnext(e)," ".repeat(s)}return n&&this.unnext(e),""}},st=t=>{let e=t.next();if(e!==null)if(e in x){let n=m(t);return{kind:"unary_op",payload:{op:e,operand:n}}}else if(e==="("){let n=m(t);if(e=t.next(),e===N&&(e=t.next()),e!==")")throw new Error("Expected ')' but got '"+e+"'");return n}else if(e===")"){if(!t.alreadyCrashed)return t.alreadyCrashed=!0,t.unnext(","+N+")"),st(t);throw new Error("No primary expression starts with ')'")}else{let n=t.next();if(n==="("){let s=[];if(n=t.next(),n===")")return{kind:"funcall",payload:{name:e,args:s}};if(n===null)throw Error("Unexpected end of input");for(t.unnext(n),s.push(m(t)),n=t.next(),n===N&&(n=t.next());n==",";)s.push(m(t)),n=t.next(),n===N&&(n=t.next());if(n===N&&(n=t.next()),n!==")")throw Error("Expected ')' but got '"+n+"'");return{kind:"funcall",payload:{name:e,args:s}}}else return n!==null&&t.unnext(n),{kind:"symbol",payload:{value:e}}}else throw new Error("Expected primary expression but reached the end of the input")},m=(t,e=d.PREC0)=>{if(e>=d.COUNT_PRECS)return st(t);let n=m(t,e+1),s=t.next();if(s!==null)if(s in w&&w[s].prec==e){let i=m(t,e);return{kind:"binary_op",payload:{op:s,lhs:n,rhs:i}}}else t.unnext(s);return n},B=(t,e={})=>{switch(console.assert(u.isObject(t)),t.kind){case"symbol":{let s=t.payload.value,i=Number(s);return isNaN(i)?e.vars&&s&&s in e.vars?e.vars[s]:(s!=null&&s.startsWith("$")&&console.warn("WARN: Unknown variable '"+s+"'"),s):i}case"unary_op":{let n=t.payload,s=n==null?void 0:n.op,i=n==null?void 0:n.operand;if(s&&s in x){if(i===void 0)throw new Error("operand needs to be an object not undefined");return x[s](B(i,e))}throw new Error("Unknown unary operator '"+n.op+"'")}case"binary_op":{let n=t.payload,s=n==null?void 0:n.op,i=n==null?void 0:n.lhs,o=n==null?void 0:n.rhs;if(s&&s in w){if(i===void 0)throw new Error(`lhs operand needs to be an object not undefined: lhs=${i} :: rhs=${o}`);if(o===void 0)throw new Error(`rhs operand needs to be an object not undefined: lhs=${i} :: rhs=${o}`);return w[s].func(B(i,e),B(o,e))}throw new Error("Unknown binary operator '"+s+"'")}case"funcall":{let n=t.payload,s=n.name,i=n.args;if(e.funcs&&s!==void 0&&i!==void 0&&s in e.funcs){let l;return(l=e.funcs)[s].apply(l,i.map(c=>B(c,e)))}s!=null&&s.startsWith("$")&&console.warn("WARN: Unknown function '"+s+"'");let o=i==null?void 0:i.map(l=>{var c;return(c=l==null?void 0:l.payload)==null?void 0:c.value}).map(l=>u.isObject(l)?JSON.stringify(l):l).join(", ");return`${s}(${o||""})`}default:throw new Error("Unexpected AST node '"+t.kind+"'")}};var zt=t=>(u.isString(t)&&(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))&&(t=t.substring(1,t.length-1)),t),Wt=t=>{let e=t==null?void 0:t.funcs;if(e&&u.isObject(e)){let n=_({},e),s={};Object.keys(n).forEach(i=>{s[i]=(...o)=>(o=o.map(zt),n[i](...o))}),t.funcs=s}return t},rt=()=>{let t=r=>Math.abs(r),e=(...r)=>r.map(s).every(a=>a===!0),n=(...r)=>r.map(s).some(a=>a===!0),s=r=>u.isValidBoolean(r)?u.isTrue(r):!!r&&G(r),i=r=>parseFloat(r),o=r=>(u.isObject(r)&&(r=JSON.stringify(r,null,0)),u.isString(r)||(r=r.toString?r.toString():`${r}`),r),l=(r,...a)=>(!u.isString(r)||a.length===0||a.map(o).forEach((p,$)=>{let y=`{${$}}`;for(;r.includes(y);)r=r.replace(y,p)}),r),c=(r,a,p)=>s(r)?a:p,h=r=>parseInt(r),f=(r,...a)=>{let p=Y(r);return a.map(o).some($=>p===$)},C=r=>f(r,"string"),O=r=>f(r,"number","bigint"),j=r=>f(r,"undefined"),L=r=>f(r,"object"),T=r=>f(r,"boolean"),z=r=>r==null,A=(r,a,p)=>(r=o(r),a=o(a),r.endsWith(a,p)),E=(r,a,p)=>o(r).startsWith(a,p),S=r=>o(r).toLowerCase(),ht=r=>o(r).toUpperCase(),yt=r=>o(r).length,gt=(...r)=>Math.max(...r.map(o).map(i).filter(a=>!isNaN(a))),dt=(...r)=>Math.min(...r.map(o).map(i).filter(a=>!isNaN(a))),mt=(r,a)=>Math.pow(r,a),bt=r=>Math.round(r),_t=(r,...a)=>{try{let $=Math[r],y=u.isFunction($)?$(...a):$;if(y)return y}catch($){console.error($)}let p=a.join(", ");return`Math.${r}${p?"("+p+")":""}`},Ct=(...r)=>r.map(o).join(""),Bt=(r,a,p)=>{let $=o(r);return(a===void 0||!u.isNumber(a)||a<0)&&(a=0),(p===void 0||!u.isNumber(a)||p>$.length)&&(p=$.length),$.substring(a,p)},Y=r=>typeof r,Et=(r,...a)=>{let p=r;return a.filter(u.isString).forEach($=>{let y=$.split(".");p[y[0]]||(y=[$]),y.filter(g=>!!g).forEach(g=>{p&&g&&p[g]&&(p=p[g])})}),p},St=(r,...a)=>{let p=r,$=!0;return a.filter(u.isString).forEach(y=>{let g=y.split(".");p[g[0]]||(g=[y]),g.filter(v=>!!v).forEach(v=>{p&&v&&p[v]?p=p[v]:$=!1})}),$},G=r=>!o(r).startsWith("$");return{$if:c,$abs:t,$all:e,$any:n,$bool:s,$float:i,$str:o,$format:l,$int:h,$isnil:z,$isinstance:f,$tisstring:C,$tisnumber:O,$tisboolean:T,$tisundefined:j,$tisobject:L,$len:yt,$max:gt,$min:dt,$pow:mt,$round:bt,$substring:Bt,$type:Y,$math:_t,$getattr:Et,$concat:Ct,$hasattr:St,$isset:G,$includes:(r,a)=>{if(r){if(r.includes&&u.isFunction(r.includes))return r.includes(a);if(r.has&&u.isFunction(r.has))return r.has(a)}return!1},$endsWith:A,$startsWith:E,$lower:S,$upper:ht}},it=(t,e={})=>t.split(`
`).map(n=>Pt(n,e)).join(`
`),Pt=(t,e={})=>{var o;let n=Wt(_({},e)),s=new F(t),i=[];for(;s.hasNext();){let l=s.spaceAfterToken(),c="",h=m(s),f=h.payload.value,C=[];if(f&&u.isString(f)&&f.startsWith("$")){c=l;let E=f.endsWith("."),S=f.endsWith("!");for(;f&&(E||S);)f=f.substring(0,f.length-1),E?C.push("."):S&&C.push("!"),E=f.endsWith("."),S=f.endsWith("!");C.length!==0&&(h.payload.value=f)}let O=h.kind==="funcall",j=h.kind==="symbol",L=B(h,n),T=C.join("");i.push(L+T+c);let z=(o=s.lastToken())==null?void 0:o.startsWith("$"),A=i.lastIndexOf(",")-1;s.lastToken()===","&&i[A]===" "&&i.splice(A,1),O&&s.nextToken()!=="!"&&i.push(" "),O||j&&z||i.push(" ")}return i.join("").trim()},V=class{constructor(e={includeBuiltIns:!0},n={}){this.options=e;this.ctx=n;e.includeBuiltIns&&(this.ctx.funcs=_(_({},rt()),this.ctx.funcs||{}))}fixName(e){return e.startsWith("$")?e:"$"+e}addVar(e,n){e=this.fixName(e),this.ctx.vars=this.ctx.vars||{},this.ctx.vars[e]=n}addFunction(e,n){e=this.fixName(e),this.ctx.funcs=this.ctx.funcs||{},this.ctx.funcs[e]=n}parse(e){return it(e,this.ctx||{})}},ot={SentenceParser:V,builtinFunctions:rt,parseSentence:it};var It=(t,e=!0)=>{if(e&&!u.isString(t)){if(u.isSet(t)&&(t=Array.from(t)),u.isObject(t))try{t=JSON.stringify(t)}catch(s){}!u.isString(t)&&t.toString&&(t=t.toString())}if(!u.isString(t))return null;let n=0;for(let s=0;s<t.length;++s){let i=t.charCodeAt(s);n=(n<<5)-n+i,n&=n}return n},Vt=t=>u.isString(t)?t.charAt(0).toUpperCase()+t.slice(1):"",k={hashCode:It,capitalize:Vt};var M=[[/(quiz)$/i,"$1zes"],[/^(oxen)$/i,"$1"],[/^(ox)$/i,"$1en"],[/(m|l)ice$/i,"$1ice"],[/(m|l)ouse$/i,"$1ice"],[/(passer)s?by$/i,"$1sby"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/([lr])f$/i,"$1ves"],[/([^f])fe$/i,"$1ves"],[/sis$/i,"ses"],[/([ti])a$/i,"$1a"],[/([ti])um$/i,"$1a"],[/(buffal|potat|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)i$/i,"$1i"],[/(octop|vir)us$/i,"$1i"],[/^(ax|test)is$/i,"$1es"],[/s$/i,"s"],[/$/i,"s"]],Z=[[/(database)s$/i,"$1"],[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/(passer)sby$/i,"$1by"],[/^(ox)en/i,"$1"],[/(alias|status)(es)?$/i,"$1"],[/(octop|vir)(us|i)$/i,"$1us"],[/^(a)x[ie]s$/i,"$1xis"],[/(cris|test)(is|es)$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)(es)?$/i,"$1"],[/(m|l)ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(t)he(sis|ses)$/i,"$1hesis"],[/(s)ynop(sis|ses)$/i,"$1ynopsis"],[/(p)rogno(sis|ses)$/i,"$1rognosis"],[/(p)arenthe(sis|ses)$/i,"$1arenthesis"],[/(d)iagno(sis|ses)$/i,"$1iagnosis"],[/(b)a(sis|ses)$/i,"$1asis"],[/(a)naly(sis|ses)$/i,"$1nalysis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/(ss)$/i,"$1"],[/s$/i,""]],q=new Set(["equipment","fish","information","jeans","money","rice","series","sheep","species"]),b=(t,e)=>{let n=l=>Array.from(l).map(c=>"["+c+c.toUpperCase()+"]").join(""),s=(l,c,h)=>{l.splice(c,0,[new RegExp(h[0],"i"),h[1]])},i=(l,c)=>{s(M,l,c)},o=(l,c)=>{s(Z,l,c)};t[0].toUpperCase()==e[0].toUpperCase()?(i(0,[`(${t[0]})${t.slice(1)}$`,"$1"+e.slice(1)]),i(0,[`(${e[0]})${e.slice(1)}$`,"$1"+e.slice(1)]),o(0,[`(${e[0]})${e.slice(1)}$`,"$1"+t.slice(1)])):(i(0,[`${t[0].toUpperCase()}${n(t.slice(1))}$`,e[0].toUpperCase()+e.slice(1)]),i(0,[`${t[0].toLowerCase()}${n(t.slice(1))}$`,e[0].toLowerCase()+e.slice(1)]),i(0,[`${e[0].toUpperCase()}${n(e.slice(1))}$`,e[0].toUpperCase()+e.slice(1)]),i(0,[`${e[0].toLowerCase()}${n(e.slice(1))}$`,e[0].toLowerCase()+e.slice(1)]),o(0,[`${e[0].toUpperCase()}${n(e.slice(1))}$`,t[0].toUpperCase()+t.slice(1)]),o(0,[`${e[0].toLowerCase()}${n(e.slice(1))}$`,t[0].toLowerCase()+t.slice(1)]))},Mt=(t,e=!0)=>{let n=at(t).replace(/-/," ").replace(/(?:^\w|[A-Z]|\b\w)/g,function(i,o){return o===0?i.toLowerCase():i.toUpperCase()}).replace(/\s+/g,"");return e?n.charAt(0).toUpperCase()+n.slice(1):n};function at(t){return t.replace(/_/g,"-")}function ct(t){return t=t.replace(/_id$/i,""),t=t.replace(/_/g," "),t=t.replace(/([a-z\d]*)/g,function(e){return e.toLowerCase()}),t=t.replace(/^\w/,function(e){return e.toUpperCase()}),t}function ut(t){let e=Math.abs(parseInt(t));if([11,12,13].includes(e%100))return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function Zt(t){return t+ut(t)}var qt=(t,e="-")=>{let s=lt(t).replace(/[^\d\w-]+/gmi,e);if(e!==""){for(;s.startsWith(e);)s=s.slice(e.length);for(;s.endsWith(e);)s=s.slice(0,s.length-e.length)}return s.toLowerCase()},pt=t=>{let e=/[A-Z]/.test(t.charAt(0));if(!t||q.has(t.toLowerCase()))return t;for(let n of M){let s=n[0],i=n[1];if(s.test(t)){let o=t.replace(s,i);return e?k.capitalize(o):o}}return t},Kt=t=>{let e=/[A-Z]/.test(t.charAt(0));for(let n of q)if(new RegExp(`\\b${n}\\b`,"i").test(t))return t;for(let n of Z){let s=n[0],i=n[1];if(s.test(t)){let o=t.replace(s,i);return e?k.capitalize(o):o}}return t},Yt=t=>pt(K(t));function Gt(t){return ct(K(t)).split(/\s+/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function lt(t){return t.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,"").trim()}function K(t){let e=t.replace(/([a-z\d])([A-Z])/g,"$1_$2");return e=e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2"),e=e.replace(/-/g,"_"),e.toLowerCase()}b("person","people");b("man","men");b("human","humans");b("child","children");b("sex","sexes");b("move","moves");b("cow","kine");b("zombie","zombies");var ft={camelize:Mt,dasherize:at,humanize:ct,ordinal:ut,ordinalize:Zt,parameterize:qt,pluralize:pt,singularize:Kt,tableize:Yt,titleize:Gt,transliterate:lt,underscore:K,UNCOUNTABLES:q,PLURALS:M,SINGULARS:Z};var $t={};var Jt=_({check:u,parser:ot,inflection:ft,utils:k},$t);return At(Dt);})();
//# sourceMappingURL=clasico-utils.js.map
